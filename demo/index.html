<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Jupicker - JBC Demo</title>
    <link rel="stylesheet" href="http://l.tbcdn.cn//apps/juassets/??apps/menu-2013/global.css,widgets/act/ju-act.css,apps/menu-2013/top.css,apps/menu-2013/nav.css,apps/menu-2013/foot.css,apps/menu-2013/media.css,apps/list-2013/itemlist.css,apps/list-2013/filter.css?t=20130605.css" />
	<script src="http://l.tbcdn.cn/??s/kissy/1.2.0/kissy-min.js,apps/juassets/config.js"></script>
  </head>
<body>
<!--  
Jupicker基于：
s/kissy/1.2.0/kissy-min.js
apps/list-2013/itemlist.css
apps/juassets/config.js

Jupicker如果需要获取未来商品需要引入以下代码。 注：聚划算头尾中页面中已引用，请勿重复引用！ Example: http://tms.taobao.com/page/maintain.htm?id=608111 
<#php include("/home/admin/go/rgn/act-include.php"); #>  /* '#' 号替换为 '？' */

技术支持： 连延卿、额台
-->

<style id="juitem-style">
    .act-title{height:30px; padding: 30px 0 0 0;width:990px; margin:0 auto;}
    .act-center{ width:990px; margin:0 auto;}
    .act-jupicker{min-height:220px; width:990px; margin:0 auto; background:url(http://img02.taobaocdn.com/tps/i2/T1eYqjXttiXXbPEHPe-35-35.gif) no-repeat center;}
    .act-jupicker li{opacity:0; transition:all 0.8s ease;}
    .J_jupicker3{border:3px dashed #FFF3CB; cursor:pointer;}
    .jupicker-complete{background:none;}
    .jupicker-complete li{opacity:1;}
</style>
<h2 class="act-title">页面加载完成后立即加载</h2>
<div class="act-jupicker J_jupicker" data-item="10000000134385,10000000134385,10000000134385"></div>

<h2 class="act-title">页面加载完成后延迟1秒加载 自定义模板</h2>
<div class="act-jupicker J_jupicker2" data-item="10000000134385"></div>

<h2 class="act-title">页面加载完成后触发Click事件加载</h2>
<div class="act-jupicker J_jupicker3" data-item="10000000134385,10000000134386"></div>

<h2 class="act-title">获取开团时间未到的（已录入却展示不出的）商品</h2>
<div class="act-center"> 需要TMS权限 Example: <a href="http://tms.taobao.com/page/editTemplate.htm?id=608111" target="_blank">tms.taobao.com/page/editTemplate.htm?id=608111</a></div>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<script id="Ju_template" type="text/html">
    <div class="ju-itemlist">
        <ul class="clearfix midimg">
            {{#each list as item}}
                <li class="{{item.state}}" data-itemid="{{item.itemId}}">
                    <a target="_blank" href="{{item.juUrl}}" class="link-box" title="{{item.longName}}">
                        <img class="item-pic" src="{{item.picUrl}}_300x300.jpg">
                        <i class="soldout-mask"></i>
                        <h3>{{item.shortName}}</h3>
                        <div class="item-prices">
                            <span class="price"><i>&yen;</i><em>{{item.activityPriceInt}}</em>.{{item.activityPriceDecimal}}</span>
                            <div class="dock">
                                <span class="discount"><em>{{item.discount}}</em>折</span>
                                <del class="orig-price">&yen;{{item.originalPrice}}</del>
                            </div>
                            {{#if item.state == "notbegin"}}
                                {{#if item.remindNum != "0"}}
                                    <span class="sold-num"><em>{{item.remindNum}}</em>人想买</span>
                                {{#else}}
                                    <span class="sold-num">即将开团</span>
                                {{/if}}
                            {{#else}}
                                <span class="sold-num"><em>{{item.soldCount}}</em>人已买</span>
                            {{/if}}
                        </div>
                        <div style="position:absolute; width:120px; height:50px; text-algin:center; border-radius:3px; top:0px; left:0; color:#FF731E; line-height:50px; background:#FFF; "> 我是自定义模板哟！ </div>
                    </a>
                </li>
            {{/each}}
        </ul>
    </div>
</script>




<script>
(function(S){
	if (S.Config.debug) {
		S.Config.mappedRules = [];//清空之前的map
		S.config({
			packages: [{
			   name: 'jbc',
			   path: '../../'//本地路径
			}],
			map: [
				[/(.+)jbc\/(\w*)\/(.+)/g,"$1$2/src/$3"]
			]
		});
	}
})(KISSY);

//Jupicker Example
KISSY.use('jbc/jupicker/v1/index',function(S, Jupicker){
    var jupicker = new Jupicker({
        'containers' : '.J_jupicker',
        //'autoload' : false,
        'trace' : true,
        'clear' : true,
        'template' : '',
        'idtype' : 'ju',
        'class_done' : 'jupicker-complete',
        'datalazyload' : true,
        'callback' : function(_d){
            console.log(_d);
        }
    });
    var jupicker2 = new Jupicker({
        'containers' : '.J_jupicker2',
        'autoload' : false,
        'trace' : true,
        'clear' : true,
        'template' : '#Ju_template',
        'idtype' : 'ju',
        'class_done' : 'jupicker-complete',
        'datalazyload' : true,
        'callback' : function(_d){
            console.log(_d);
        }
    });


    var jupicker3 = new Jupicker({
        'containers' : '.J_jupicker3',
        'autoload' : false,
        'trace' : true,
        'clear' : true,
        'template' : '',
        'idtype' : 'ju',
        'class_done' : 'jupicker-complete',
        'datalazyload' : true,
        'callback' : function(_d){
            console.log(_d);
        }
    });

    setTimeout(function(){
        jupicker2.load();
    },1000);

    S.Event.on('.J_jupicker3', 'click', function(ev){
        
        jupicker3.load();
    }, null);
});
</script>
</body>
</html>